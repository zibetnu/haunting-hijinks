[gd_scene load_steps=49 format=3 uid="uid://8qaswvkeb8qd"]

[ext_resource type="PackedScene" uid="uid://cjnncoyhqt6xi" path="res://src/client_node_deleter/client_node_deleter.tscn" id="1_rhiif"]
[ext_resource type="PackedScene" uid="uid://da03scrbiqax2" path="res://src/peer_id/peer_id.tscn" id="2_bh3m0"]
[ext_resource type="PackedScene" uid="uid://bxooivyeej01k" path="res://src/summon/summon.tscn" id="3_26ncu"]
[ext_resource type="Script" path="res://addons/godot_state_charts/state_chart.gd" id="3_wp1tu"]
[ext_resource type="Script" path="res://addons/godot_state_charts/compound_state.gd" id="4_74yim"]
[ext_resource type="PackedScene" uid="uid://bxn13bi5j05gc" path="res://src/mediators/peer_id_enabled/peer_id_enabled.tscn" id="4_xlp01"]
[ext_resource type="Script" path="res://addons/godot_state_charts/atomic_state.gd" id="5_6yps6"]
[ext_resource type="PackedScene" uid="uid://dhavwobkg4v8o" path="res://src/mediators/state_chart_counter/state_chart_counter.tscn" id="5_c6vhq"]
[ext_resource type="PackedScene" uid="uid://cbv2ondm7xhnv" path="res://src/controller/synced/synced.tscn" id="5_xwsa3"]
[ext_resource type="Script" path="res://addons/godot_state_charts/parallel_state.gd" id="6_3dmdv"]
[ext_resource type="Script" path="res://addons/godot_state_charts/transition.gd" id="6_il0ju"]
[ext_resource type="PackedScene" uid="uid://gvf2peg6yuns" path="res://src/controller/unpause_force/unpause_force.tscn" id="6_wi10c"]
[ext_resource type="PackedScene" uid="uid://ct3lglsww1564" path="res://src/mediators/state_component/move/move.tscn" id="7_1d45a"]
[ext_resource type="PackedScene" uid="uid://w68cagofxelw" path="res://src/controller/anti_button_spam/anti_button_spam.tscn" id="7_ijrj0"]
[ext_resource type="PackedScene" uid="uid://djba3xyguo0kb" path="res://src/mediators/state_component/enable_remote_property.tscn/enable_remote_property.tscn" id="7_jcrlr"]
[ext_resource type="PackedScene" uid="uid://bee5jtcost270" path="res://src/controller/composite/composite.tscn" id="8_mynla"]
[ext_resource type="PackedScene" uid="uid://dfe7skxjkwons" path="res://src/controller/joypad/joypad.tscn" id="9_x08fo"]
[ext_resource type="PackedScene" uid="uid://dioiotebenk87" path="res://src/mediators/state_component/timeout_event/timeout_event.tscn" id="10_0oqyy"]
[ext_resource type="PackedScene" uid="uid://3hkpcs75ade2" path="res://src/controller/keyboard_and_mouse/keyboard_and_mouse.tscn" id="10_el6fq"]
[ext_resource type="PackedScene" uid="uid://c18war56not2c" path="res://src/mediators/controller_state_chart_events/controller_state_chart_events.tscn" id="11_2r614"]
[ext_resource type="PackedScene" uid="uid://bm0ar7asqubxm" path="res://src/mediators/state_component/controller_state_chart_enter_events/controller_state_chart_enter_events.tscn" id="11_fqc8g"]
[ext_resource type="PackedScene" uid="uid://b5py3q2r2ukvm" path="res://src/mediators/signal_state_chart_event/signal_state_chart_event.tscn" id="12_53vqb"]
[ext_resource type="PackedScene" uid="uid://bg6e2s53ki76i" path="res://src/mediators/peer_id_input_authority/peer_id_input_authority.tscn" id="12_llovw"]
[ext_resource type="PackedScene" uid="uid://umudi6rradfm" path="res://src/mediators/state_component/start_summon/start_summon.tscn" id="12_ogv56"]
[ext_resource type="Script" path="res://addons/godot_state_charts/expression_guard.gd" id="13_56q65"]
[ext_resource type="PackedScene" uid="uid://nj5bu4130gy3" path="res://src/costume/ghost_placeholder/ghost_placeholder.tscn" id="13_arjsn"]
[ext_resource type="PackedScene" uid="uid://ctcjena4x8kr0" path="res://src/aura/aura.tscn" id="13_e27lr"]
[ext_resource type="PackedScene" uid="uid://bcyyx2srd4gwe" path="res://src/mediators/peer_id_name_label/peer_id_name_label.tscn" id="13_leves"]
[ext_resource type="PackedScene" uid="uid://y5w40m6pqbvt" path="res://src/mediators/peer_id_visibility/peer_id_visibility.tscn" id="14_f0hrm"]
[ext_resource type="PackedScene" uid="uid://d15idq0ucnvek" path="res://src/auto_texture_progress_bar/auto_texture_progress_bar.tscn" id="15_nnx8e"]
[ext_resource type="PackedScene" uid="uid://b55ojigpr88dd" path="res://src/mediators/state_component/costume_animation/costume_animation.tscn" id="18_bcsx6"]
[ext_resource type="PackedScene" uid="uid://b30o6hj6qsvu2" path="res://src/mediators/controller_state_chart_expression_properties/controller_state_chart_expression_properties.tscn" id="18_o8e6t"]
[ext_resource type="Script" path="res://src/remote_property.gd" id="19_c6cbw"]
[ext_resource type="PackedScene" uid="uid://cmrvakm1sd7b7" path="res://src/mediators/state_component/set_bool/set_bool.tscn" id="19_qtpd3"]
[ext_resource type="PackedScene" uid="uid://d03ye80rpxrep" path="res://src/damage_signals/damage_signals.tscn" id="29_1sq8w"]
[ext_resource type="Texture2D" uid="uid://e3ujjltguycf" path="res://assets/progress_bar.png" id="29_i4s33"]
[ext_resource type="PackedScene" uid="uid://b6et2ypj2js4m" path="res://src/mediators/damage_event/damage_event.tscn" id="30_jrfk5"]
[ext_resource type="PackedScene" uid="uid://d03j155281y4p" path="res://src/mediators/state_component/visible/visible.tscn" id="30_syx0q"]
[ext_resource type="PackedScene" uid="uid://bcwkugn6v3oy7" path="res://addons/godot_state_charts/utilities/state_chart_debugger.tscn" id="32_luctv"]

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_hsnve"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1

[sub_resource type="Resource" id="Resource_knfa0"]
script = ExtResource("13_56q65")
expression = "drain_areas == 0"

[sub_resource type="Resource" id="Resource_0r4f3"]
script = ExtResource("13_56q65")
expression = "drain_areas == 0"

[sub_resource type="CircleShape2D" id="CircleShape2D_xn3hr"]
radius = 16.0

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_bqubs"]
properties/0/path = NodePath(".:limit_left")
properties/0/spawn = true
properties/0/replication_mode = 2
properties/1/path = NodePath(".:limit_top")
properties/1/spawn = true
properties/1/replication_mode = 2
properties/2/path = NodePath(".:limit_right")
properties/2/spawn = true
properties/2/replication_mode = 2
properties/3/path = NodePath(".:limit_bottom")
properties/3/spawn = true
properties/3/replication_mode = 2

[sub_resource type="CircleShape2D" id="CircleShape2D_51u44"]
radius = 160.0

[sub_resource type="CircleShape2D" id="CircleShape2D_m31g4"]
radius = 96.0

[sub_resource type="Gradient" id="Gradient_a05sb"]
colors = PackedColorArray(1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_u72sc"]
gradient = SubResource("Gradient_a05sb")
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0.5, 0)

[node name="Ghost" type="CharacterBody2D"]
collision_layer = 8

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_hsnve")

[node name="ClientNodeDeleter" parent="." node_paths=PackedStringArray("nodes") instance=ExtResource("1_rhiif")]
nodes = [NodePath("../Summon"), NodePath("../StateChart"), NodePath("../Synced/ControllerStateChartEvents"), NodePath("../Synced/ControllerStateChartExpressionProperties"), NodePath("../Synced/RemoteProperty"), NodePath("../AuraLarge"), NodePath("../AuraSmall"), NodePath("../GhostPlaceholder/Behavior"), NodePath("../IgnoreCanvasModulate/FollowPlayer/NotificationContainer/HealthBar/Behavior"), NodePath("../IgnoreCanvasModulate/FollowPlayer/NotificationContainer/SummonBar/Behavior"), NodePath("../IgnoreCanvasModulate/FollowPlayer/NotificationContainer/SummonBar/Visible")]

[node name="PeerID" parent="." instance=ExtResource("2_bh3m0")]

[node name="Summon" parent="." instance=ExtResource("3_26ncu")]
target_group = &"hunters"

[node name="SignalStateChartEvent" parent="Summon" node_paths=PackedStringArray("signal_source", "state_chart") instance=ExtResource("12_53vqb")]
signal_name = &"summoned"
signal_source = NodePath("..")
state_chart = NodePath("../../StateChart")

[node name="StateChartCounter" parent="Summon" node_paths=PackedStringArray("state_chart") instance=ExtResource("5_c6vhq")]
counter_name = &"drain_areas"
state_chart = NodePath("../../StateChart")

[node name="RemoteProperty" type="Node" parent="Summon" node_paths=PackedStringArray("source_node", "destination_node")]
script = ExtResource("19_c6cbw")
source_node = NodePath("..")
source_property = &"areas_summoned"
destination_node = NodePath("../StateChartCounter")
destination_property = &"counter"

[node name="StateChart" type="Node" parent="."]
script = ExtResource("3_wp1tu")

[node name="Base" type="Node" parent="StateChart"]
script = ExtResource("6_3dmdv")

[node name="Behavior" type="Node" parent="StateChart/Base"]
script = ExtResource("4_74yim")
initial_state = NodePath("Alive")

[node name="Dead" type="Node" parent="StateChart/Base/Behavior"]
script = ExtResource("5_6yps6")

[node name="MakeVisible" type="Node" parent="StateChart/Base/Behavior/Dead"]
script = ExtResource("6_il0ju")
to = NodePath("../../../Visibility/Visibile")

[node name="Alive" type="Node" parent="StateChart/Base/Behavior"]
script = ExtResource("4_74yim")
initial_state = NodePath("Normal")

[node name="EnableRemoteProperty" parent="StateChart/Base/Behavior/Alive" node_paths=PackedStringArray("remote_property", "active_state") instance=ExtResource("7_jcrlr")]
remote_property = NodePath("../../../../../Synced/RemoteProperty")
active_state = NodePath("..")

[node name="Normal" type="Node" parent="StateChart/Base/Behavior/Alive"]
script = ExtResource("5_6yps6")

[node name="Button1Pressed" type="Node" parent="StateChart/Base/Behavior/Alive/Normal"]
script = ExtResource("6_il0ju")
to = NodePath("../../Sprint")
event = &"button_1_pressed"

[node name="Button2Pressed" type="Node" parent="StateChart/Base/Behavior/Alive/Normal"]
script = ExtResource("6_il0ju")
to = NodePath("../../Summon")
event = &"button_2_pressed"
guard = SubResource("Resource_knfa0")

[node name="Damaged" type="Node" parent="StateChart/Base/Behavior/Alive/Normal"]
script = ExtResource("6_il0ju")
to = NodePath("../../Stun")
event = &"damaged"

[node name="MakeInvisible" type="Node" parent="StateChart/Base/Behavior/Alive/Normal"]
script = ExtResource("6_il0ju")
to = NodePath("../../../../Visibility/Invisibile")

[node name="MoveStarted" type="Node" parent="StateChart/Base/Behavior/Alive/Normal"]
script = ExtResource("6_il0ju")
to = NodePath("../../../../Animation/Move")
event = &"move_started"

[node name="MoveStopped" type="Node" parent="StateChart/Base/Behavior/Alive/Normal"]
script = ExtResource("6_il0ju")
to = NodePath("../../../../Animation/Idle")
event = &"move_stopped"

[node name="ControllerStateChartEnterEvents" parent="StateChart/Base/Behavior/Alive/Normal" node_paths=PackedStringArray("controller", "state_chart", "active_state") instance=ExtResource("11_fqc8g")]
controller = NodePath("../../../../../../Synced")
state_chart = NodePath("../../../../..")
active_state = NodePath("..")

[node name="Move" parent="StateChart/Base/Behavior/Alive/Normal" node_paths=PackedStringArray("controller", "character", "active_state") instance=ExtResource("7_1d45a")]
controller = NodePath("../../../../../../Synced")
character = NodePath("../../../../../..")
speed = 92.0
active_state = NodePath("..")

[node name="Sprint" type="Node" parent="StateChart/Base/Behavior/Alive"]
script = ExtResource("5_6yps6")

[node name="Button1Released" type="Node" parent="StateChart/Base/Behavior/Alive/Sprint"]
script = ExtResource("6_il0ju")
to = NodePath("../../Normal")
event = &"button_1_released"

[node name="Button2Pressed" type="Node" parent="StateChart/Base/Behavior/Alive/Sprint"]
script = ExtResource("6_il0ju")
to = NodePath("../../Summon")
event = &"button_2_pressed"
guard = SubResource("Resource_0r4f3")

[node name="Damaged" type="Node" parent="StateChart/Base/Behavior/Alive/Sprint"]
script = ExtResource("6_il0ju")
to = NodePath("../../Stun")
event = &"damaged"

[node name="MakeVisible" type="Node" parent="StateChart/Base/Behavior/Alive/Sprint"]
script = ExtResource("6_il0ju")
to = NodePath("../../../../Visibility/Visibile")

[node name="MoveStarted" type="Node" parent="StateChart/Base/Behavior/Alive/Sprint"]
script = ExtResource("6_il0ju")
to = NodePath("../../../../Animation/Sprint")
event = &"move_started"

[node name="MoveStopped" type="Node" parent="StateChart/Base/Behavior/Alive/Sprint"]
script = ExtResource("6_il0ju")
to = NodePath("../../../../Animation/Idle")
event = &"move_stopped"

[node name="ControllerStateChartEnterEvents" parent="StateChart/Base/Behavior/Alive/Sprint" node_paths=PackedStringArray("controller", "state_chart", "active_state") instance=ExtResource("11_fqc8g")]
controller = NodePath("../../../../../../Synced")
state_chart = NodePath("../../../../..")
ignore_button_2 = true
active_state = NodePath("..")

[node name="Move" parent="StateChart/Base/Behavior/Alive/Sprint" node_paths=PackedStringArray("controller", "character", "active_state") instance=ExtResource("7_1d45a")]
controller = NodePath("../../../../../../Synced")
character = NodePath("../../../../../..")
speed = 123.0
active_state = NodePath("..")

[node name="Summon" type="Node" parent="StateChart/Base/Behavior/Alive"]
script = ExtResource("5_6yps6")

[node name="Button1Pressed" type="Node" parent="StateChart/Base/Behavior/Alive/Summon"]
script = ExtResource("6_il0ju")
to = NodePath("../../Sprint")
event = &"button_1_pressed"

[node name="Button2Released" type="Node" parent="StateChart/Base/Behavior/Alive/Summon"]
script = ExtResource("6_il0ju")
to = NodePath("../../Normal")
event = &"button_2_released"

[node name="Damaged" type="Node" parent="StateChart/Base/Behavior/Alive/Summon"]
script = ExtResource("6_il0ju")
to = NodePath("../../Stun")
event = &"damaged"

[node name="MakeVisible" type="Node" parent="StateChart/Base/Behavior/Alive/Summon"]
script = ExtResource("6_il0ju")
to = NodePath("../../../../Visibility/Visibile")

[node name="SetAnimation" type="Node" parent="StateChart/Base/Behavior/Alive/Summon"]
script = ExtResource("6_il0ju")
to = NodePath("../../../../Animation/Summon")

[node name="Summoned" type="Node" parent="StateChart/Base/Behavior/Alive/Summon"]
script = ExtResource("6_il0ju")
to = NodePath("../../Normal")
event = &"summoned"

[node name="ControllerStateChartEnterEvents" parent="StateChart/Base/Behavior/Alive/Summon" node_paths=PackedStringArray("controller", "state_chart", "active_state") instance=ExtResource("11_fqc8g")]
controller = NodePath("../../../../../../Synced")
state_chart = NodePath("../../../../..")
ignore_button_1 = true
active_state = NodePath("..")

[node name="StartSummon" parent="StateChart/Base/Behavior/Alive/Summon" node_paths=PackedStringArray("summon", "active_state") instance=ExtResource("12_ogv56")]
summon = NodePath("../../../../../../Summon")
active_state = NodePath("..")

[node name="Stun" type="Node" parent="StateChart/Base/Behavior/Alive"]
script = ExtResource("5_6yps6")

[node name="MakeVisible" type="Node" parent="StateChart/Base/Behavior/Alive/Stun"]
script = ExtResource("6_il0ju")
to = NodePath("../../../../Visibility/Visibile")

[node name="PanicTimeout" type="Node" parent="StateChart/Base/Behavior/Alive/Stun"]
script = ExtResource("6_il0ju")
to = NodePath("../../Panic")
delay_seconds = 1.5

[node name="SetAnimation" type="Node" parent="StateChart/Base/Behavior/Alive/Stun"]
script = ExtResource("6_il0ju")
to = NodePath("../../../../Animation/Stun")

[node name="Panic" type="Node" parent="StateChart/Base/Behavior/Alive"]
script = ExtResource("6_3dmdv")

[node name="PanicEnded" type="Node" parent="StateChart/Base/Behavior/Alive/Panic"]
script = ExtResource("6_il0ju")
to = NodePath("../../Normal")
event = &"panic_ended"

[node name="SetAnimation" type="Node" parent="StateChart/Base/Behavior/Alive/Panic"]
script = ExtResource("6_il0ju")
to = NodePath("../../../../Animation/Panic")

[node name="EndEvent" parent="StateChart/Base/Behavior/Alive/Panic" node_paths=PackedStringArray("state_chart", "active_state") instance=ExtResource("10_0oqyy")]
event = &"panic_ended"
state_chart = NodePath("../../../../..")
wait_time = 3.0
active_state = NodePath("..")

[node name="InvisibleEvent" parent="StateChart/Base/Behavior/Alive/Panic" node_paths=PackedStringArray("state_chart", "active_state") instance=ExtResource("10_0oqyy")]
event = &"invisibility_started"
state_chart = NodePath("../../../../..")
wait_time = 1.33
active_state = NodePath("..")

[node name="Move" parent="StateChart/Base/Behavior/Alive/Panic" node_paths=PackedStringArray("controller", "character", "active_state") instance=ExtResource("7_1d45a")]
controller = NodePath("../../../../../../Synced")
character = NodePath("../../../../../..")
speed = 154.0
active_state = NodePath("..")

[node name="Grab" type="Node" parent="StateChart/Base/Behavior/Alive"]
script = ExtResource("5_6yps6")

[node name="SetAnimation" type="Node" parent="StateChart/Base/Behavior/Alive/Grab"]
script = ExtResource("6_il0ju")
to = NodePath("../../../../Animation/Grab")

[node name="Animation" type="Node" parent="StateChart/Base"]
script = ExtResource("4_74yim")
initial_state = NodePath("Idle")

[node name="Dead" type="Node" parent="StateChart/Base/Animation"]
script = ExtResource("5_6yps6")

[node name="CostumeAnimation" parent="StateChart/Base/Animation/Dead" node_paths=PackedStringArray("costume_behavior", "active_state") instance=ExtResource("18_bcsx6")]
animation_name = "dead"
costume_behavior = NodePath("../../../../../GhostPlaceholder/Behavior")
active_state = NodePath("..")

[node name="Idle" type="Node" parent="StateChart/Base/Animation"]
script = ExtResource("5_6yps6")

[node name="CostumeAnimation" parent="StateChart/Base/Animation/Idle" node_paths=PackedStringArray("costume_behavior", "active_state") instance=ExtResource("18_bcsx6")]
animation_name = "idle"
costume_behavior = NodePath("../../../../../GhostPlaceholder/Behavior")
active_state = NodePath("..")

[node name="Move" type="Node" parent="StateChart/Base/Animation"]
script = ExtResource("5_6yps6")

[node name="CostumeAnimation" parent="StateChart/Base/Animation/Move" node_paths=PackedStringArray("costume_behavior", "active_state") instance=ExtResource("18_bcsx6")]
animation_name = "move"
costume_behavior = NodePath("../../../../../GhostPlaceholder/Behavior")
active_state = NodePath("..")

[node name="Sprint" type="Node" parent="StateChart/Base/Animation"]
script = ExtResource("5_6yps6")

[node name="CostumeAnimation" parent="StateChart/Base/Animation/Sprint" node_paths=PackedStringArray("costume_behavior", "active_state") instance=ExtResource("18_bcsx6")]
animation_name = "move"
costume_behavior = NodePath("../../../../../GhostPlaceholder/Behavior")
active_state = NodePath("..")

[node name="Summon" type="Node" parent="StateChart/Base/Animation"]
script = ExtResource("5_6yps6")

[node name="CostumeAnimation" parent="StateChart/Base/Animation/Summon" node_paths=PackedStringArray("costume_behavior", "active_state") instance=ExtResource("18_bcsx6")]
animation_name = "idle"
costume_behavior = NodePath("../../../../../GhostPlaceholder/Behavior")
active_state = NodePath("..")

[node name="Stun" type="Node" parent="StateChart/Base/Animation"]
script = ExtResource("5_6yps6")

[node name="CostumeAnimation" parent="StateChart/Base/Animation/Stun" node_paths=PackedStringArray("costume_behavior", "active_state") instance=ExtResource("18_bcsx6")]
animation_name = "stun"
costume_behavior = NodePath("../../../../../GhostPlaceholder/Behavior")
active_state = NodePath("..")

[node name="Panic" type="Node" parent="StateChart/Base/Animation"]
script = ExtResource("5_6yps6")

[node name="CostumeAnimation" parent="StateChart/Base/Animation/Panic" node_paths=PackedStringArray("costume_behavior", "active_state") instance=ExtResource("18_bcsx6")]
animation_name = "panic"
costume_behavior = NodePath("../../../../../GhostPlaceholder/Behavior")
active_state = NodePath("..")

[node name="Grab" type="Node" parent="StateChart/Base/Animation"]
script = ExtResource("5_6yps6")

[node name="CostumeAnimation" parent="StateChart/Base/Animation/Grab" node_paths=PackedStringArray("costume_behavior", "active_state") instance=ExtResource("18_bcsx6")]
animation_name = "move"
costume_behavior = NodePath("../../../../../GhostPlaceholder/Behavior")
active_state = NodePath("..")

[node name="Visibility" type="Node" parent="StateChart/Base"]
script = ExtResource("4_74yim")
initial_state = NodePath("Invisibile")

[node name="Invisibile" type="Node" parent="StateChart/Base/Visibility"]
script = ExtResource("5_6yps6")

[node name="InvisibilityEnded" type="Node" parent="StateChart/Base/Visibility/Invisibile"]
script = ExtResource("6_il0ju")
to = NodePath("../../Visibile")
event = &"invisibility_ended"

[node name="Visibile" type="Node" parent="StateChart/Base/Visibility"]
script = ExtResource("5_6yps6")

[node name="InvisibilityStarted" type="Node" parent="StateChart/Base/Visibility/Visibile"]
script = ExtResource("6_il0ju")
to = NodePath("../../Invisibile")
event = &"invisibility_started"

[node name="Vulnerability" type="Node" parent="StateChart/Base"]
script = ExtResource("4_74yim")
initial_state = NodePath("Vulnerable")

[node name="Invulnerable" type="Node" parent="StateChart/Base/Vulnerability"]
script = ExtResource("5_6yps6")

[node name="Vulnerable" type="Node" parent="StateChart/Base/Vulnerability"]
script = ExtResource("5_6yps6")

[node name="Damaged" type="Node" parent="StateChart/Base/Vulnerability/Vulnerable"]
script = ExtResource("6_il0ju")
to = NodePath("../../../Animation/Stun")
event = &"damaged"

[node name="DamageEventActive" parent="StateChart/Base/Vulnerability/Vulnerable" node_paths=PackedStringArray("target_node", "active_state") instance=ExtResource("19_qtpd3")]
target_node = NodePath("../../../../../DamageSignals/DamageEvent")
property_name = &"active"
active_state = NodePath("..")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
scale = Vector2(0.99, 0.99)
shape = SubResource("CircleShape2D_xn3hr")

[node name="Camera2D" type="Camera2D" parent="."]
enabled = false
limit_left = 0
limit_top = 0
limit_right = 6400
limit_bottom = 6400

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="Camera2D"]
replication_config = SubResource("SceneReplicationConfig_bqubs")

[node name="PeerIDEnabled" parent="Camera2D" node_paths=PackedStringArray("peer_id", "target") instance=ExtResource("4_xlp01")]
peer_id = NodePath("../../PeerID")
target = NodePath("..")

[node name="Synced" parent="." node_paths=PackedStringArray("controller") instance=ExtResource("5_xwsa3")]
process_mode = 1
controller = NodePath("UnpauseForce")

[node name="UnpauseForce" parent="Synced" node_paths=PackedStringArray("controller") instance=ExtResource("6_wi10c")]
controller = NodePath("AntiButtonSpam")

[node name="AntiButtonSpam" parent="Synced/UnpauseForce" node_paths=PackedStringArray("controller") instance=ExtResource("7_ijrj0")]
controller = NodePath("Composite")

[node name="Composite" parent="Synced/UnpauseForce/AntiButtonSpam" node_paths=PackedStringArray("controller_1", "controller_2") instance=ExtResource("8_mynla")]
controller_1 = NodePath("Joypad")
controller_2 = NodePath("KeyboardAndMouse")

[node name="Joypad" parent="Synced/UnpauseForce/AntiButtonSpam/Composite" instance=ExtResource("9_x08fo")]

[node name="KeyboardAndMouse" parent="Synced/UnpauseForce/AntiButtonSpam/Composite" instance=ExtResource("10_el6fq")]

[node name="ControllerStateChartEvents" parent="Synced" node_paths=PackedStringArray("controller", "state_chart") instance=ExtResource("11_2r614")]
controller = NodePath("..")
state_chart = NodePath("../../StateChart")

[node name="ControllerStateChartExpressionProperties" parent="Synced" node_paths=PackedStringArray("controller", "state_chart") instance=ExtResource("18_o8e6t")]
controller = NodePath("..")
state_chart = NodePath("../../StateChart")

[node name="PeerIDInputAuthority" parent="Synced" node_paths=PackedStringArray("peer_id", "synced_controller") instance=ExtResource("12_llovw")]
peer_id = NodePath("../../PeerID")
synced_controller = NodePath("..")

[node name="RemoteProperty" type="Node" parent="Synced" node_paths=PackedStringArray("source_node", "destination_node")]
script = ExtResource("19_c6cbw")
source_node = NodePath("..")
source_property = &"move_vector"
destination_node = NodePath("../../GhostPlaceholder/Behavior")
destination_property = &"direction_vector"

[node name="AuraLarge" parent="." instance=ExtResource("13_e27lr")]

[node name="CollisionShape2D" type="CollisionShape2D" parent="AuraLarge"]
shape = SubResource("CircleShape2D_51u44")

[node name="AuraSmall" parent="." instance=ExtResource("13_e27lr")]
intensity = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="AuraSmall"]
shape = SubResource("CircleShape2D_m31g4")

[node name="DamageSignals" parent="." instance=ExtResource("29_1sq8w")]
collision_layer = 8
collision_mask = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="DamageSignals"]
shape = SubResource("CircleShape2D_xn3hr")

[node name="DamageEvent" parent="DamageSignals" node_paths=PackedStringArray("state_chart") instance=ExtResource("30_jrfk5")]
event = &"damaged"
state_chart = NodePath("../../StateChart")
weak_to = 1

[node name="GhostPlaceholder" parent="." instance=ExtResource("13_arjsn")]
position = Vector2(0, -8)

[node name="PointLight2D" type="PointLight2D" parent="."]
range_item_cull_mask = 33
texture = SubResource("GradientTexture2D_u72sc")
height = 16.0

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="."]
remote_path = NodePath("../IgnoreCanvasModulate/FollowPlayer")

[node name="IgnoreCanvasModulate" type="CanvasLayer" parent="."]
follow_viewport_enabled = true

[node name="StateChartDebugger" parent="IgnoreCanvasModulate" instance=ExtResource("32_luctv")]
offset_left = 361.0
offset_top = 13.0
offset_right = -2.0
offset_bottom = -10.0
initial_node_to_watch = NodePath("../../StateChart")

[node name="FollowPlayer" type="Node2D" parent="IgnoreCanvasModulate"]

[node name="NameLabel" type="Label" parent="IgnoreCanvasModulate/FollowPlayer"]
modulate = Color(1, 1, 1, 0.501961)
z_index = 1
offset_left = -84.0
offset_top = -50.0
offset_right = 84.0
offset_bottom = -24.0
text = "peer name"
horizontal_alignment = 1

[node name="PeerIdNameLabel" parent="IgnoreCanvasModulate/FollowPlayer/NameLabel" node_paths=PackedStringArray("peer_id", "label") instance=ExtResource("13_leves")]
peer_id = NodePath("../../../../PeerID")
label = NodePath("..")

[node name="PeerIDVisibility" parent="IgnoreCanvasModulate/FollowPlayer/NameLabel" node_paths=PackedStringArray("peer_id", "canvas_item") instance=ExtResource("14_f0hrm")]
peer_id = NodePath("../../../../PeerID")
canvas_item = NodePath("..")
invert = true

[node name="NotificationContainer" type="HBoxContainer" parent="IgnoreCanvasModulate/FollowPlayer"]
offset_left = -32.0
offset_top = -42.0
offset_right = 32.0
offset_bottom = -26.0
alignment = 1

[node name="HealthBar" parent="IgnoreCanvasModulate/FollowPlayer/NotificationContainer" instance=ExtResource("15_nnx8e")]
visible = false
layout_mode = 2
size_flags_vertical = 8
tint_under = Color(1, 1, 1, 0.247059)

[node name="Behavior" parent="IgnoreCanvasModulate/FollowPlayer/NotificationContainer/HealthBar" index="1"]
value_variable = "progress"
max_variable = "max_progress"

[node name="SummonBar" parent="IgnoreCanvasModulate/FollowPlayer/NotificationContainer" instance=ExtResource("15_nnx8e")]
visible = false
layout_mode = 2
size_flags_vertical = 8
texture_under = ExtResource("29_i4s33")
texture_progress = ExtResource("29_i4s33")
tint_under = Color(1, 1, 1, 0.247059)

[node name="Behavior" parent="IgnoreCanvasModulate/FollowPlayer/NotificationContainer/SummonBar" index="1" node_paths=PackedStringArray("source_node")]
source_node = NodePath("../../../../../Summon")
value_variable = "charge"
max_variable = "max_charge"

[node name="Visible" parent="IgnoreCanvasModulate/FollowPlayer/NotificationContainer/SummonBar" node_paths=PackedStringArray("canvas_item", "active_state") instance=ExtResource("30_syx0q")]
canvas_item = NodePath("..")
active_state = NodePath("../../../../../StateChart/Base/Behavior/Alive/Summon")

[connection signal="taken" from="StateChart/Base/Behavior/Alive/Summon/Summoned" to="Summon/RemoteProperty" method="manual_process"]
[connection signal="damaged_by" from="DamageSignals" to="DamageSignals/DamageEvent" method="take_damage"]

[editable path="GhostPlaceholder"]
[editable path="IgnoreCanvasModulate/FollowPlayer/NotificationContainer/HealthBar"]
[editable path="IgnoreCanvasModulate/FollowPlayer/NotificationContainer/SummonBar"]
