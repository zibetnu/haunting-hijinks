[gd_scene load_steps=18 format=3 uid="uid://dsl4rd03hiysv"]

[ext_resource type="PackedScene" uid="uid://bavgk282m5ngb" path="res://src/player/player.tscn" id="1_to4j3"]
[ext_resource type="PackedScene" uid="uid://860yylsw16sx" path="res://src/player/ability/animation_setter/animation_setter.tscn" id="2_lwjsd"]
[ext_resource type="PackedScene" uid="uid://dyev6t6l5ykdp" path="res://src/player/ability/flashlight/flashlight.tscn" id="3_5tbkl"]
[ext_resource type="PackedScene" uid="uid://31u5yaj3y8wu" path="res://src/player/ability/direction_setter/direction_setter.tscn" id="3_phihg"]
[ext_resource type="PackedScene" uid="uid://c76lyvhv5uic7" path="res://src/player/damage_handler/instant_death/instant_death.tscn" id="5_6ne1d"]
[ext_resource type="PackedScene" uid="uid://c83xurnfijlnw" path="res://src/player/ability/invulnerable/invulnerable.tscn" id="6_fd4p3"]
[ext_resource type="PackedScene" uid="uid://skggbcfxrt3w" path="res://src/player/ability/revivable/revivable.tscn" id="6_x7j0x"]
[ext_resource type="PackedScene" uid="uid://2btutei2ijcx" path="res://src/player/ability/aura_sense/aura_sense.tscn" id="10_y8xbh"]
[ext_resource type="PackedScene" uid="uid://by4phnj1wlefr" path="res://src/player/state_machine/exit_trigger/exit_trigger.tscn" id="12_0llgs"]
[ext_resource type="PackedScene" uid="uid://myko8836tn6o" path="res://src/rotation_to_vector/rotation_to_vector.tscn" id="12_tg1e4"]
[ext_resource type="PackedScene" uid="uid://ifwrxny1pnn5" path="res://src/player/costume/hunter_placeholder/hunter_placeholder.tscn" id="15_sxqk2"]
[ext_resource type="PackedScene" uid="uid://2f424rmfm3g4" path="res://src/player/notification/state_notification/state_notification.tscn" id="16_abq7u"]
[ext_resource type="PackedScene" uid="uid://d15idq0ucnvek" path="res://src/auto_texture_progress_bar/auto_texture_progress_bar.tscn" id="17_s4xae"]
[ext_resource type="Texture2D" uid="uid://bg6wg2xddcnr5" path="res://assets/heart.png" id="19_1shfe"]
[ext_resource type="PackedScene" uid="uid://ba88f53kn5057" path="res://src/player/notification/aura_alert/aura_alert.tscn" id="20_g7gks"]
[ext_resource type="PackedScene" uid="uid://d12pvd5crkjdc" path="res://src/player/notification/battery_dead/battery_dead.tscn" id="21_85b84"]
[ext_resource type="PackedScene" uid="uid://dk7au4to2006x" path="res://src/player/notification/battery_low/battery_low.tscn" id="22_g4cek"]

[node name="Hunter" node_paths=PackedStringArray("costume") groups=["hunters"] instance=ExtResource("1_to4j3")]
collision_layer = 4
collision_mask = 23
costume = NodePath("YSort/HunterPlaceholder")

[node name="Abilities" type="Node2D" parent="." index="4"]

[node name="AnimationSetters" type="Node2D" parent="Abilities" index="0"]

[node name="Dead" parent="Abilities/AnimationSetters" index="0" node_paths=PackedStringArray("player", "states") instance=ExtResource("2_lwjsd")]
animation_name = "dead"
player = NodePath("../../..")
states = [NodePath("../../../StateMachine/Dead")]

[node name="Idle" parent="Abilities/AnimationSetters" index="1" node_paths=PackedStringArray("player", "states") instance=ExtResource("2_lwjsd")]
animation_name = "idle"
player = NodePath("../../..")
states = [NodePath("../../../StateMachine/Idle")]

[node name="Move" parent="Abilities/AnimationSetters" index="2" node_paths=PackedStringArray("player", "states") instance=ExtResource("2_lwjsd")]
animation_name = "move"
player = NodePath("../../..")
states = [NodePath("../../../StateMachine/Move")]

[node name="AuraSense" parent="Abilities" index="1" node_paths=PackedStringArray("dead_exit_trigger", "player", "states") instance=ExtResource("10_y8xbh")]
dead_exit_trigger = NodePath("../../StateMachine/Dead/ExitTrigger")
player = NodePath("../..")
states = [NodePath("../../StateMachine/Idle"), NodePath("../../StateMachine/Move")]

[node name="DirectionSetter" parent="Abilities" index="2" node_paths=PackedStringArray("source_node", "player", "states") instance=ExtResource("3_phihg")]
source_node = NodePath("../../YSort/Flashlight/RotationToVector")
source_variable = "vector"
player = NodePath("../..")
states = [NodePath("../../StateMachine/Idle"), NodePath("../../StateMachine/Move")]

[node name="Invulnerable" parent="Abilities" index="3" node_paths=PackedStringArray("dead_exit_trigger", "player", "states") instance=ExtResource("6_fd4p3")]
dead_exit_trigger = NodePath("../../StateMachine/Dead/ExitTrigger")
player = NodePath("../..")
states = [NodePath("../../StateMachine/Idle"), NodePath("../../StateMachine/Move")]

[node name="Revivable" parent="Abilities" index="4" node_paths=PackedStringArray("revived_state", "player", "states") instance=ExtResource("6_x7j0x")]
revived_state = NodePath("../../StateMachine/Idle")
revives_with = 1
player = NodePath("../..")
states = [NodePath("../../StateMachine/Dead")]

[node name="DamageHandlers" type="Node" parent="." index="5"]

[node name="InstantDeath" parent="DamageHandlers" index="0" node_paths=PackedStringArray("dead_state") instance=ExtResource("5_6ne1d")]
dead_state = NodePath("../../StateMachine/Dead")
weak_to = 2

[node name="ExitTrigger" parent="StateMachine/Dead" index="0" node_paths=PackedStringArray("trigger_on_exit", "state_machine") instance=ExtResource("12_0llgs")]
trigger_on_exit = NodePath("..")
state_machine = NodePath("../..")

[node name="Idle" parent="StateMachine" index="1" node_paths=PackedStringArray("move_state", "damage_handler")]
move_state = NodePath("../Move")
damage_handler = NodePath("../../DamageHandlers/InstantDeath")

[node name="Move" parent="StateMachine" index="2" node_paths=PackedStringArray("idle_state", "damage_handler")]
idle_state = NodePath("../Idle")
damage_handler = NodePath("../../DamageHandlers/InstantDeath")

[node name="Flashlight" parent="YSort" index="0" node_paths=PackedStringArray("player", "states") instance=ExtResource("3_5tbkl")]
player = NodePath("../..")
states = [NodePath("../../StateMachine/Idle"), NodePath("../../StateMachine/Move")]

[node name="RotationToVector" parent="YSort/Flashlight" index="4" node_paths=PackedStringArray("source_node") instance=ExtResource("12_tg1e4")]
source_node = NodePath("..")
source_variable = "flashlight_rotation"

[node name="HunterPlaceholder" parent="YSort" index="1" instance=ExtResource("15_sxqk2")]

[node name="StateNotification" parent="IgnoreCanvasModulate/FollowPlayer/NotificationContainer" index="0" node_paths=PackedStringArray("states", "state_machine") instance=ExtResource("16_abq7u")]
visible = false
custom_minimum_size = Vector2(8, 8)
layout_mode = 2
states = [NodePath("../../../../StateMachine/Dead")]
state_machine = NodePath("../../../../StateMachine")

[node name="AutoTextureProgressBar" parent="IgnoreCanvasModulate/FollowPlayer/NotificationContainer/StateNotification" index="0" node_paths=PackedStringArray("source_node") instance=ExtResource("17_s4xae")]
layout_mode = 0
fill_mode = 3
texture_under = ExtResource("19_1shfe")
texture_progress = ExtResource("19_1shfe")
tint_under = Color(1, 1, 1, 0.247059)
source_node = NodePath("../../../../../Abilities/Revivable")
value_variable = "progress"
max_variable = "max_progress"

[node name="AuraAlert" parent="IgnoreCanvasModulate/FollowPlayer/NotificationContainer" index="1" node_paths=PackedStringArray("aura_sense") instance=ExtResource("20_g7gks")]
visible = false
layout_mode = 2
aura_sense = NodePath("../../../../Abilities/AuraSense")

[node name="BatteryDead" parent="IgnoreCanvasModulate/FollowPlayer/NotificationContainer" index="2" node_paths=PackedStringArray("flashlight") instance=ExtResource("21_85b84")]
visible = false
layout_mode = 2
flashlight = NodePath("../../../../YSort/Flashlight")

[node name="BatteryLow" parent="IgnoreCanvasModulate/FollowPlayer/NotificationContainer" index="3" node_paths=PackedStringArray("flashlight") instance=ExtResource("22_g4cek")]
visible = false
layout_mode = 2
flashlight = NodePath("../../../../YSort/Flashlight")

[node name="PointLight2D" parent="." index="12"]
energy = 0.5
